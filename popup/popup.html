<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PR Enhancer</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container" role="application" aria-label="PR Enhancer">
    <!-- Header - Primer PageHeader Pattern -->
    <header class="popup-header" role="banner">
      <div class="logo" aria-hidden="true">
        <!-- Octicon: list-ordered -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="24" height="24" fill="currentColor" aria-hidden="true">
          <path d="M5 3.25a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 5 3.25Zm0 5a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 5 8.25Zm0 5a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1-.75-.75ZM.924 10.32a.5.5 0 0 1-.851-.525l.001-.001.001-.002.002-.004.007-.011c.097-.144.215-.273.348-.384.228-.19.588-.392 1.068-.392.468 0 .858.181 1.126.484.259.294.399.697.399 1.14 0 .468-.171.914-.496 1.243a4.4 4.4 0 0 1-.395.366c-.094.08-.189.164-.284.25h1.175a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5v-.115c0-.606.382-1.108.818-1.474.205-.172.42-.333.617-.478.203-.15.399-.296.538-.436.168-.17.227-.322.227-.454 0-.187-.058-.323-.137-.414-.073-.084-.18-.136-.343-.136-.227 0-.353.085-.444.167a1.084 1.084 0 0 0-.187.241ZM2.5 1.5a.5.5 0 0 1 .5.5v3.5H1.75a.5.5 0 0 1 0-1h.25V2.508l-.224.447a.5.5 0 0 1-.894-.447l.5-1A.5.5 0 0 1 1.882 1h.125a.5.5 0 0 1 .493.5Z"/>
        </svg>
      </div>
      <div class="title-group">
        <h1 id="popup-title">PR Enhancer</h1>
        <span class="subtitle" id="popup-subtitle">Organize your code reviews</span>
      </div>
    </header>

    <!-- Main Content -->
    <main class="popup-main" role="main" aria-labelledby="popup-title">
      <!-- Onboarding Section - Primer Blankslate Pattern -->
      <div id="onboarding" class="onboarding" role="region" aria-labelledby="onboarding-title" hidden>
        <div class="onboarding-title" id="onboarding-title">
          <!-- Octicon: light-bulb -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" aria-hidden="true">
            <path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"/>
          </svg>
          <span>Welcome!</span>
        </div>
        <p class="onboarding-text">
          Sort PR comments by date with a single click. Use 
          <kbd class="onboarding-kbd">Alt</kbd> + <kbd class="onboarding-kbd">S</kbd> 
          to quickly toggle sorting on any GitHub PR.
        </p>
        <button type="button" class="onboarding-dismiss" id="dismiss-onboarding" aria-label="Dismiss welcome message">
          Got it
        </button>
      </div>

      <!-- Status Message - Primer Flash Pattern -->
      <div id="status-message" class="status-message" role="status" aria-live="polite" hidden>
        <!-- Octicon: info -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" aria-hidden="true">
          <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/>
        </svg>
        <span id="status-text">Navigate to a GitHub PR to use this extension</span>
      </div>

      <!-- Sort Controls - Primer ActionList Pattern -->
      <div id="sort-controls" class="sort-controls" role="group" aria-labelledby="sort-label">
        <h2 class="section-label" id="sort-label">Sort comments by:</h2>
        
        <div class="sort-options" role="radiogroup" aria-labelledby="sort-label">
          <!-- Sort Option: Newest First -->
          <button
            type="button"
            class="sort-btn active"
            data-sort="date-newest"
            role="radio"
            aria-checked="true"
            aria-describedby="newest-desc"
          >
            <div class="btn-icon" aria-hidden="true">
              <!-- Octicon: history -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="18" height="18" fill="currentColor">
                <path d="m.427 1.927 1.215 1.215a8.002 8.002 0 1 1-1.6 5.685.75.75 0 1 1 1.493-.154 6.5 6.5 0 1 0 1.18-4.458l1.358 1.358A.25.25 0 0 1 3.896 6H.25A.25.25 0 0 1 0 5.75V2.104a.25.25 0 0 1 .427-.177ZM7.75 4a.75.75 0 0 1 .75.75v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.751.751 0 0 1 7 8.25v-3.5a.75.75 0 0 1 .75-.75Z"/>
              </svg>
            </div>
            <div class="btn-content">
              <span class="btn-title">Newest First</span>
              <span class="btn-desc" id="newest-desc">Latest comments on top</span>
            </div>
          </button>

          <!-- Sort Option: Oldest First -->
          <button
            type="button"
            class="sort-btn"
            data-sort="date-oldest"
            role="radio"
            aria-checked="false"
            aria-describedby="oldest-desc"
          >
            <div class="btn-icon" aria-hidden="true">
              <!-- Octicon: clock -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="18" height="18" fill="currentColor">
                <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm7-3.25v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.751.751 0 0 1 7 8.25v-3.5a.75.75 0 0 1 1.5 0Z"/>
              </svg>
            </div>
            <div class="btn-content">
              <span class="btn-title">Oldest First</span>
              <span class="btn-desc" id="oldest-desc">Original chronological order</span>
            </div>
          </button>
        </div>
      </div>

      <!-- Settings Section -->
      <div id="settings-section" class="settings-section" role="group" aria-labelledby="settings-label">
        <h2 class="section-label" id="settings-label">Settings</h2>

        <div class="settings-list">
          <!-- Toggle: Move PR Status to Top -->
          <label class="setting-item" for="move-merge-toggle">
            <div class="setting-content">
              <span class="setting-title">Move merge status to top</span>
              <span class="setting-desc">Show merge/status box at the top of the conversation</span>
            </div>
            <div class="toggle-wrapper">
              <input
                type="checkbox"
                id="move-merge-toggle"
                class="toggle-input"
                role="switch"
                aria-checked="true"
                checked
              >
              <span class="toggle-slider" aria-hidden="true"></span>
            </div>
          </label>
        </div>
      </div>

      <!-- Loading State -->
      <div id="loading-state" class="status-message loading" hidden aria-busy="true">
        <span class="spinner" aria-hidden="true"></span>
        <span>Loading...</span>
      </div>
    </main>

    <!-- Footer - Primer ActionBar Pattern -->
    <footer class="popup-footer" role="contentinfo">
      <a 
        href="https://github.com" 
        target="_blank" 
        rel="noopener noreferrer" 
        class="footer-link"
        aria-label="Open GitHub in new tab"
      >
        <!-- Octicon: mark-github -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" aria-hidden="true">
          <path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"/>
        </svg>
        <span>Open GitHub</span>
      </a>
      <span class="version" aria-label="Extension version 2.0.0">v2.0.0</span>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
